# シフト管理アプリケーション

業務用のシフト登録・共有・管理ができるウェブアプリケーションです。データベースを使用して複数のユーザー間でシフト情報を共有できます。

## 主な機能

### 1. ユーザー管理
- 管理者とスタッフの権限分け
- ユーザーの追加・削除
- 部署ごとの管理
- セキュアなパスワード保存（bcrypt）

### 2. シフト管理
- カレンダー形式でのシフト表示
- シフトの登録・削除
- シフト詳細の表示
- シフトの承認ワークフロー
- 繰り返しシフトの登録（毎週、隔週、毎月）

### 3. テンプレート機能
- よく使うシフトパターンをテンプレートとして保存
- テンプレートの編集・削除

### 4. 通知システム
- シフト申請・承認・却下の通知
- 未読通知のバッジ表示

### 5. レポート・検索機能
- シフトデータのCSVエクスポート
- ユーザー、日付、部署、備考による検索
- 部署別フィルタリング

## 技術仕様

### フロントエンド
- HTML5, CSS3, JavaScript (ES6+)
- レスポンシブデザイン（モバイル対応）

### バックエンド
- Node.js + Express
- RESTful API
- JWT認証
- SQLite3データベース

## インストール方法

### 必要条件
- Node.js (v14以上)
- npm (v6以上)

### セットアップ手順

1. リポジトリをクローンまたはダウンロード
```
git clone https://github.com/yourusername/shift-management-app.git
cd shift-management-app
```

2. 依存パッケージのインストール
```
npm install
```

3. アプリケーションの起動
```
npm start
```

4. ブラウザで以下のURLにアクセス
```
http://localhost:3000
```

## 使用方法

### ログイン情報
- 管理者: ユーザー名 `admin` / パスワード `admin123`
- スタッフ: ユーザー名 `staff1` / パスワード `staff123`

### シフト登録の流れ
1. ログイン後、左側メニューの「シフト登録」をクリック
2. 必要に応じてテンプレートを選択
3. 日付、開始時間、終了時間、繰り返し設定、備考を入力
4. 「登録」ボタンをクリック
5. 管理者の承認を待つ（管理者の場合は自動承認）

### シフト確認
- 「シフト一覧」をクリックしてカレンダー表示を確認
- カレンダー上のシフトをクリックすると詳細が表示される
- 部署でフィルタリングすることも可能

### シフト承認（管理者のみ）
1. 「シフト承認」メニューをクリック
2. 承認待ちのシフト一覧が表示される
3. 「承認」または「却下」ボタンをクリック

### テンプレート管理
1. 「シフトテンプレート」メニューをクリック
2. 新規テンプレートの作成や既存テンプレートの編集・削除が可能

### ユーザー管理（管理者のみ）
1. 「ユーザー管理」メニューをクリック
2. 新規ユーザーの追加や既存ユーザーの削除が可能

### データエクスポート
- シフト一覧画面の「CSVエクスポート」ボタンをクリック
- ダウンロードされたCSVファイルを表計算ソフトで開く

## セキュリティ機能

- JWT（JSON Web Token）による認証
- パスワードのハッシュ化（bcrypt）
- 権限に基づくアクセス制御
- 入力値のバリデーション

## データベース構造

- **users**: ユーザー情報（ID、ユーザー名、パスワード、役割、メール、部署）
- **shifts**: シフト情報（ID、ユーザー名、日付、時間、備考、ステータス）
- **templates**: シフトテンプレート（ID、名前、開始時間、終了時間）
- **notifications**: 通知（ID、タイプ、ユーザー名、メッセージ、既読状態）
- **departments**: 部署情報（ID、名前）

## 今後の開発予定

- PDFエクスポート機能の実装
- シフト交代リクエスト機能
- 勤務時間の自動集計
- カレンダーの週表示・日表示の追加
- 複数の勤務地対応
